<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Networked programs &#8212; Python for Everybody - Interactive</title>
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/accessibility.css?v=DB047029" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/handsontable@7.2.2/dist/handsontable.full.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/CodeChat.css" />
    <link rel="stylesheet" type="text/css" href="_static/matrixeq.css?v=58BC228F" />
    <link rel="stylesheet" type="text/css" href="_static/webgldemo.css?v=B36B48D" />
    <link rel="stylesheet" type="text/css" href="_static/webglinteractive.css?v=910DF1E1" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-3.4.1/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/presenter_mode.css?v=9FF1320F" />
    <link rel="stylesheet" type="text/css" href="_static/jquery-ui-1.10.3.custom.min.css?v=97E0178A" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/user-highlights.css?v=A2326E52" />
    <link rel="stylesheet" type="text/css" href="_static/runestone-custom-sphinx-bootstrap.css?v=5.0.8" />
    <link rel="stylesheet" type="text/css" href="_static/theme-overrides.css?v=2DAFE138" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/jquery.highlight.js?v=F1C496C8"></script>
    <script src="_static/sql-wasm.js?v=44FE0709"></script>
    <script src="https://cdn.jsdelivr.net/npm/handsontable@7.2.2/dist/handsontable.full.js"></script>
    <script src="_static/animationbase.js?v=A043C3A7"></script>
    <script src="_static/pytutor-embed.bundle.js?v=268B5C04"></script>
    <script src="_static/html4css1.css?v=4D8F3FB4"></script>
    <script src="_static/matrixeq.js?v=D64CFA5A"></script>
    <script src="_static/webglinteractive.js?v=2B768384"></script>
    <script src="_static/FileSaver.min.js?v=8408C997"></script>
    <script src="_static/Blob.js?v=AEC2447"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.emitter.bidi.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.emitter.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.fallbacks.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.messagestore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.parser.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.language.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega@4.0.0-rc.2/build/vega.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@2.5.0/build/vega-lite.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@3.14.0/build/vega-embed.js"></script>
    <script src="_static/runestone.js?v=3EAD674C"></script>
    <script src="_static/jquery-ui-1.10.3.custom.min.js?v=2B07FE4F"></script>
    <script src="_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
    <script src="_static/jquery-fix.js?v=1226591B"></script>
    <script src="_static/bootstrap-sphinx.js"></script>
    <script src="_static/jquery.idle-timer.js?v=E942DAF1"></script>
    <script src="_static/presenter_mode.js?v=2DF16FB4"></script>
    <script src="_static/theme.js?v=D899FB97"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="shortcut icon" href="/runestone/static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  
    eBookConfig.useRunestoneServices = true;
    eBookConfig.host = 'http://127.0.0.1:8000' || 'http://127.0.0.1:8000';
    eBookConfig.app = eBookConfig.host+'/runestone';
    eBookConfig.course = 'py4e-int';
    eBookConfig.basecourse = 'py4e-int';
    eBookConfig.isLoggedIn = false;
  
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.logLevel = 10;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.python3 = true;
  eBookConfig.acDefaultLanguage = '' ? '' : 'python'
  eBookConfig.runestone_version = '';
  eBookConfig.jobehost = '';
  eBookConfig.proxyuri_runs = '';
  eBookConfig.proxyuri_files = '';
  eBookConfig.enable_chatcodes = false ? false : false;


</script>

<!-- Ad Serving Headers Only serve ads to Anonymous Users -->



<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>



  </head><body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar" aria-label="navbar toggle" class="visuallyhidden">toggle navbar</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        
          <a class="brand-logo" style='background: transparent url("_static/img/logo_small.png") no-repeat 0px 0px;' href="/runestone/default/user/login">&nbsp; </a>
        
        <a class="navbar-brand" href="index.html" aria-label="index-page">
          
          py4e-int
        </a>
      </div>
    </div>



    <div class="navbar-collapse collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-right" >

        <li class="divider-vertical"></li>


        <!-- social media dropdown -->
        
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-globe" style="opacity: 0.9"><span aria-label="Social" class="visuallyhidden">Social</span></i>
          </a>
          <ul class="dropdown-menu social-menu">
              <li>
                <div>
                  <b>Runestone in social media:</b>
                </div>
                <a href="https://twitter.com/iRunestone" class="twitter-follow-button" data-show-count="true">Follow @iRunestone</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                <div class="fb-like" data-href="https://www.facebook.com/RunestoneInteractive" data-send="false" data-layout="button_count" data-width="300" data-show-faces="false" data-font="arial"></div>
              </li>

              <li class="divider"></li>
              <li>
                <div>
                  <b>Help support us:</b>
                </div>
                <div>
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                  <input type="hidden" name="cmd" value="_s-xclick">
                  <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----MIIHNwYJKoZIhvcNAQcEoIIHKDCCByQCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYAcrkqh1hn3lYqIpfXxNqe1T82EhXzCJGy1yMAmklpyZshyMkfDGe1Bhx+iwyGeoYRTTyphFmP+9M3NyO0+Q5XdHxgZPx/zYjjBxlZHgEV6jhE8bN2fHkkPf0VHfz0a0QQylQOPlKiOTZV7B37Jpk6yM47oVZ1tG/KNm0NkfmB76DELMAkGBSsOAwIaBQAwgbQGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQIi0GmFfOlcjuAgZBbYOo9UO+CpMQa+PYqwsUmUnJvXIImeMeNI3KVTUx5Cfk9gNMo3WzPeiB5IqZo9nRAQ0mf1qL2ecLeB5tidM+lgBUhOxfj3/FecpnVFa0263gp4g+PLw8jzhvVRdUon1K3SeO1Rzh23fIRKwnrD6btt73uwtj0sl3tGd8qz+6GIcwPDdRk9VcUffiBJT/ZagKgggOHMIIDgzCCAuygAwIBAgIBADANBgkqhkiG9w0BAQUFADCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wHhcNMDQwMjEzMTAxMzE1WhcNMzUwMjEzMTAxMzE1WjCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMFHTt38RMxLXJyO2SmS+Ndl72T7oKJ4u4uw+6awntALWh03PewmIJuzbALScsTS4sZoS1fKciBGoh11gIfHzylvkdNe/hJl66/RGqrj5rFb08sAABNTzDTiqqNpJeBsYs/c2aiGozptX2RlnBktH+SUNpAajW724Nv2Wvhif6sFAgMBAAGjge4wgeswHQYDVR0OBBYEFJaffLvGbxe9WT9S1wob7BDWZJRrMIG7BgNVHSMEgbMwgbCAFJaffLvGbxe9WT9S1wob7BDWZJRroYGUpIGRMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbYIBADAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4GBAIFfOlaagFrl71+jq6OKidbWFSE+Q4FqROvdgIONth+8kSK//Y/4ihuE4Ymvzn5ceE3S/iBSQQMjyvb+s2TWbQYDwcp129OPIbD9epdr4tJOUNiSojw7BHwYRiPh58S1xGlFgHFXwrEBb3dgNbMUa+u4qectsMAXpVHnD9wIyfmHMYIBmjCCAZYCAQEwgZQwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tAgEAMAkGBSsOAwIaBQCgXTAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3DQEJBTEPFw0xMzExMDMxMzQxMzFaMCMGCSqGSIb3DQEJBDEWBBRDJF8w+zsMr7FSk+pwinB5f5D4rzANBgkqhkiG9w0BAQEFAASBgHw1LMHpkpaqHIvDGdFE0eG+2mZlmMnUeDCBhQlbc7QMzFQYKTV94NfaebBO4PmNdADe1rq4WidSRZZbE7CzkX9IGENYnBTWY0hb2l0lGdGrJdGeWyV3ekg9WVaFMMumrekds96h3Cx7dGz2kWDzIai2iEXE/qoE+xpkyXAYZNV3-----END PKCS7-----
                  ">
                  <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                  </form>

                </div>
              </li>
          </ul>
        </li><!-- end social media dropdown -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'><span aria-label="Search" class="visuallyhidden">Search</span></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='index.html' aria-label="index-page">Table of Contents</a></li>
            
            <li><a href='genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <!-- user account dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-user" style="opacity:0.9;"><span aria-label="User" class="visuallyhidden">User</span></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><span class='loggedinuser'></span></li>
            <li class="divider"></li>
            <li><a href='/runestone/assignments/chooseAssignment.html'>Assignments</a></li>
            <li><a href='/runestone/assignments/practice'>Practice</a></li>
            <li class="divider"></li>
            
            <li><a href='/runestone/default/courses'>Change Course</a></li>
			      <li class="divider"></li>
            <li id="ip_dropdown_link"><a href='/runestone/admin/index'>Instructor's Page</a></li>
            
            <li><a href='/runestone/dashboard/studentreport'>Progress Page</a></li>
            <li class="divider"></li>
            
            <li><a href="/runestone/default/user/profile" id="profilelink">Edit Profile</a></li>
            <li><a href="/runestone/default/user/change_password" id="passwordlink">Change Password</a></li>
            <li><a href="/runestone/default/user/register" id="registerlink">Register</a></li>
            
            <li class='loginout'><a href='#'>Login</a></li> <!-- correct link populated by addNavbarLoginLink() -->
			<!-- dark mode toggle -->
             <li><label class="theme-switch" for="checkbox">
					  <input type="checkbox" id="checkbox" onchange="switchTheme()" />
							<div class="slider round"></div>
					</label>Dark Mode</li>
			 </ul>
        </li>
        <!-- end user account dropdown -->
        
        <li class="divider-vertical"></li>
        <!-- <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li> -->

        <!-- <li class="dropdown">             -->
          <li id="scratch_ac_link" class="dropdown"><a href="javascript:ACFactory.toggleScratchActivecode()">
              <i class="glyphicon glyphicon-pencil" style="opacity:0.9;"><span aria-label="Scratch Activecode" class="visuallyhidden">Scratch Activecode</span></i></a></li>
        <!-- </li> -->

        <li class="divider-vertical"></li>

        
        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"><span aria-label="Help" class="visuallyhidden">Help</span></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href='http://runestoneinteractive.org/pages/faq.html'>FAQ</a></li>
            <li><a href='https://runestone.academy/runestone/static/instructorguide/index.html'>Instructors Guide</a></li>
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>About Runestone</a></li>
            <li><a href='/runestone/default/reportabug?course=py4e-int&page=12-network'>Report A Problem</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>
      
      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          
          <li class="divider-vertical"></li>
        
        <!-- 
          

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        -->
        
          <li></li>
        
      </ul>

      </div> <!-- navbar -->







    </div> <!-- container -->
  </div>
</div>


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content" role="main">
  
  <div class="section" id="networked-programs">
<h1>Networked programs<a class="headerlink" href="#networked-programs" title="Permalink to this headline">¶</a></h1>
<p>While many of the examples in this book have focused on reading files
and looking for data in those files, there are many different sources of
information when one considers the Internet.</p>
<p>In this chapter we will pretend to be a web browser and retrieve web
pages using the HyperText Transfer Protocol (HTTP). Then we will read
through the web page data and parse it.</p>
<div class="section" id="hypertext-transfer-protocol-http">
<h2>HyperText Transfer Protocol - HTTP<a class="headerlink" href="#hypertext-transfer-protocol-http" title="Permalink to this headline">¶</a></h2>
<p>The network protocol that powers the web is actually quite simple and
there is built-in support in Python called <code class="docutils literal notranslate"><span class="pre">sockets</span></code> which
makes it very easy to make network connections and retrieve data over
those sockets in a Python program.</p>
<p>A <em>socket</em> is much like a file, except that a single
socket provides a two-way connection between two programs. You can both
read from and write to the same socket. If you write something to a
socket, it is sent to the application at the other end of the socket. If
you read from the socket, you are given the data which the other
application has sent.</p>
<p>But if you try to read a socket when the program on the other end of the
socket has not sent any data, you just sit and wait. If the programs on
both ends of the socket simply wait for some data without sending
anything, they will wait for a very long time, so an important part of programs
that communicate over the Internet is to have some sort of protocol.</p>
<p>A protocol is a set of precise rules that
determine who is to go first, what they are to do, and then what the
responses are to that message, and who sends next, and so on. In a sense
the two applications at either end of the socket are doing a dance and
making sure not to step on each other’s toes.</p>
<p>There are many documents that describe these network protocols. The
HyperText Transfer Protocol is described in the following document:</p>
<p><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616.txt">https://www.w3.org/Protocols/rfc2616/rfc2616.txt</a></p>
<p>This is a long and complex 176-page document with a lot of detail. If
you find it interesting, feel free to read it all. But if you take a
look around page 36 of RFC2616 you will find the syntax for the GET
request. To request a document from a web server, we make a connection
to the <code class="docutils literal notranslate"><span class="pre">www.pr4e.org</span></code> server on port 80, and then send a
line of the form</p>
<p><code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">http://data.pr4e.org/romeo.txt</span> <span class="pre">HTTP/1.0</span></code></p>
<p>where the second parameter is the web page we are requesting, and then
we also send a blank line. The web server will respond with some header
information about the document and a blank line followed by the document
content.</p>
</div>
<div class="section" id="the-world-s-simplest-web-browser">
<h2>The world’s simplest web browser<a class="headerlink" href="#the-world-s-simplest-web-browser" title="Permalink to this headline">¶</a></h2>
<p>Perhaps the easiest way to show how the HTTP protocol works is to write
a very simple Python program that makes a connection to a web server and
follows the rules of the HTTP protocol to request a document and
display what the server sends back.</p>
<p>VerbatimInput{../code3/socket1.py}</p>
<p>First the program makes a connection to port 80 on the server
<a class="reference external" href="http://www.py4e.com">www.py4e.com</a>. Since our program is playing the role
of the “web browser”, the HTTP protocol says we must send the GET
command followed by a blank line. <code class="docutils literal notranslate"><span class="pre">\r\n</span></code> signifies an EOL (end of line),
so <code class="docutils literal notranslate"><span class="pre">\r\n\r\n</span></code> signifies nothing between two EOL sequences. That is the
equivalent of a blank line.</p>
<a class="reference external image-reference" href="height=2.0in&#64;../images/socket"><img alt="A Socket Connection" src="height=2.0in&#64;../images/socket" /></a>
<p>Once we send that blank line, we write a loop that receives data in
512-character chunks from the socket and prints the data out until there
is no more data to read (i.e., the recv() returns an empty string).</p>
<p>The program produces the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="n">OK</span>
<span class="n">Date</span><span class="p">:</span> <span class="n">Wed</span><span class="p">,</span> <span class="mi">11</span> <span class="n">Apr</span> <span class="mi">2018</span> <span class="mi">18</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span> <span class="n">GMT</span>
<span class="n">Server</span><span class="p">:</span> <span class="n">Apache</span><span class="o">/</span><span class="mf">2.4</span><span class="o">.</span><span class="mi">7</span> <span class="p">(</span><span class="n">Ubuntu</span><span class="p">)</span>
<span class="n">Last</span><span class="o">-</span><span class="n">Modified</span><span class="p">:</span> <span class="n">Sat</span><span class="p">,</span> <span class="mi">13</span> <span class="n">May</span> <span class="mi">2017</span> <span class="mi">11</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">22</span> <span class="n">GMT</span>
<span class="n">ETag</span><span class="p">:</span> <span class="s2">&quot;a7-54f6609245537&quot;</span>
<span class="n">Accept</span><span class="o">-</span><span class="n">Ranges</span><span class="p">:</span> <span class="nb">bytes</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">167</span>
<span class="n">Cache</span><span class="o">-</span><span class="n">Control</span><span class="p">:</span> <span class="nb">max</span><span class="o">-</span><span class="n">age</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">no</span><span class="o">-</span><span class="n">cache</span><span class="p">,</span> <span class="n">no</span><span class="o">-</span><span class="n">store</span><span class="p">,</span> <span class="n">must</span><span class="o">-</span><span class="n">revalidate</span>
<span class="n">Pragma</span><span class="p">:</span> <span class="n">no</span><span class="o">-</span><span class="n">cache</span>
<span class="n">Expires</span><span class="p">:</span> <span class="n">Wed</span><span class="p">,</span> <span class="mi">11</span> <span class="n">Jan</span> <span class="mi">1984</span> <span class="mi">05</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">GMT</span>
<span class="n">Connection</span><span class="p">:</span> <span class="n">close</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span> <span class="n">text</span><span class="o">/</span><span class="n">plain</span>

<span class="n">But</span> <span class="n">soft</span> <span class="n">what</span> <span class="n">light</span> <span class="n">through</span> <span class="n">yonder</span> <span class="n">window</span> <span class="n">breaks</span>
<span class="n">It</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">east</span> <span class="ow">and</span> <span class="n">Juliet</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">sun</span>
<span class="n">Arise</span> <span class="n">fair</span> <span class="n">sun</span> <span class="ow">and</span> <span class="n">kill</span> <span class="n">the</span> <span class="n">envious</span> <span class="n">moon</span>
<span class="n">Who</span> <span class="ow">is</span> <span class="n">already</span> <span class="n">sick</span> <span class="ow">and</span> <span class="n">pale</span> <span class="k">with</span> <span class="n">grief</span>
</pre></div>
</div>
<p>The output starts with headers which the web server sends to describe
the document. For example, the <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> header
indicates that the document is a plain text document
(<code class="docutils literal notranslate"><span class="pre">text/plain</span></code>).</p>
<p>After the server sends us the headers, it adds a blank line to indicate
the end of the headers, and then sends the actual data of the file
<em>romeo.txt</em>.</p>
<p>This example shows how to make a low-level network connection with
sockets. Sockets can be used to communicate with a web server or with a
mail server or many other kinds of servers. All that is needed is to
find the document which describes the protocol and write the code to
send and receive the data according to the protocol.</p>
<p>However, since the protocol that we use most commonly is the HTTP web
protocol, Python has a special library specifically designed to support
the HTTP protocol for the retrieval of documents and data over the web.</p>
<p>One of the requirements for using the HTTP protocol is the need to send
and receive data as bytes objects, instead of strings. In the preceding
example, the <code class="docutils literal notranslate"><span class="pre">encode()</span></code> and <code class="docutils literal notranslate"><span class="pre">decode()</span></code> methods convert strings into bytes
objects and back again.</p>
<p>The next example uses <code class="docutils literal notranslate"><span class="pre">b''</span></code> notation to specify that a variable should
be stored as a bytes object. <code class="docutils literal notranslate"><span class="pre">encode()</span></code> and <code class="docutils literal notranslate"><span class="pre">b''</span></code> are equivalent.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="sa">b</span><span class="s1">&#39;Hello world&#39;</span>
<span class="go">b&#39;Hello world&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;Hello world&#39;</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
<span class="go">b&#39;Hello world&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="retrieving-an-image-over-http">
<h2>Retrieving an image over HTTP<a class="headerlink" href="#retrieving-an-image-over-http" title="Permalink to this headline">¶</a></h2>
<p>index{urllib!image}
index{image!jpg}
index{jpg}</p>
<p>In the above example, we retrieved a plain text file which had newlines
in the file and we simply copied the data to the screen as the program
ran. We can use a similar program to retrieve an image across using
HTTP. Instead of copying the data to the screen as the program runs, we
accumulate the data in a string, trim off the headers, and then save the
image data to a file as follows:</p>
<p>VerbatimInput{../code3/urljpeg.py}</p>
<p>When the program runs, it produces the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python urljpeg.py
5120 5120
5120 10240
4240 14480
5120 19600
...
5120 214000
3200 217200
5120 222320
5120 227440
3167 230607
Header length 393
HTTP/1.1 200 OK
Date: Wed, 11 Apr 2018 18:54:09 GMT
Server: Apache/2.4.7 (Ubuntu)
Last-Modified: Mon, 15 May 2017 12:27:40 GMT
ETag: &quot;38342-54f8f2e5b6277&quot;
Accept-Ranges: bytes
Content-Length: 230210
Vary: Accept-Encoding
Cache-Control: max-age=0, no-cache, no-store, must-revalidate
Pragma: no-cache
Expires: Wed, 11 Jan 1984 05:00:00 GMT
Connection: close
Content-Type: image/jpeg
</pre></div>
</div>
<p>You can see that for this url, the <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> header
indicates that body of the document is an image
(<code class="docutils literal notranslate"><span class="pre">image/jpeg</span></code>). Once the program completes, you can view the
image data by opening the file <code class="docutils literal notranslate"><span class="pre">stuff.jpg</span></code> in an image
viewer.</p>
<p>As the program runs, you can see that we don’t get 5120 characters each
time we call the <code class="docutils literal notranslate"><span class="pre">recv()</span></code> method. We get as many characters
as have been transferred across the network to us by the web server at
the moment we call <code class="docutils literal notranslate"><span class="pre">recv()</span></code>. In this example, we either get
as few as 3200 characters each time we request up to 5120 characters of
data.</p>
<p>Your results may be different depending on your network speed. Also note
that on the last call to <code class="docutils literal notranslate"><span class="pre">recv()</span></code> we get 3167 bytes, which is
the end of the stream, and in the next call to <code class="docutils literal notranslate"><span class="pre">recv()</span></code> we
get a zero-length string that tells us that the server has called
<code class="docutils literal notranslate"><span class="pre">close()</span></code> on its end of the socket and there is no more data
forthcoming.</p>
<p>index{time}
index{time.sleep}</p>
<p>We can slow down our successive <code class="docutils literal notranslate"><span class="pre">recv()</span></code> calls by
uncommenting the call to <code class="docutils literal notranslate"><span class="pre">time.sleep()</span></code>. This way, we wait a
quarter of a second after each call so that the server can “get ahead”
of us and send more data to us before we call <code class="docutils literal notranslate"><span class="pre">recv()</span></code> again.
With the delay, in place the program executes as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python urljpeg.py
5120 5120
5120 10240
5120 15360
...
5120 225280
5120 230400
207 230607
Header length 393
HTTP/1.1 200 OK
Date: Wed, 11 Apr 2018 21:42:08 GMT
Server: Apache/2.4.7 (Ubuntu)
Last-Modified: Mon, 15 May 2017 12:27:40 GMT
ETag: &quot;38342-54f8f2e5b6277&quot;
Accept-Ranges: bytes
Content-Length: 230210
Vary: Accept-Encoding
Cache-Control: max-age=0, no-cache, no-store, must-revalidate
Pragma: no-cache
Expires: Wed, 11 Jan 1984 05:00:00 GMT
Connection: close
Content-Type: image/jpeg
</pre></div>
</div>
<p>Now other than the first and last calls to <code class="docutils literal notranslate"><span class="pre">recv()</span></code>, we now
get 5120 characters each time we ask for new data.</p>
<p>There is a buffer between the server making <code class="docutils literal notranslate"><span class="pre">send()</span></code> requests
and our application making <code class="docutils literal notranslate"><span class="pre">recv()</span></code> requests. When we run the
program with the delay in place, at some point the server might fill up
the buffer in the socket and be forced to pause until our program starts
to empty the buffer. The pausing of either the sending application or
the receiving application is called “flow control.”</p>
<p>index{flow control}</p>
</div>
<div class="section" id="retrieving-web-pages-with-urllib">
<h2>Retrieving web pages with <code class="docutils literal notranslate"><span class="pre">urllib</span></code><a class="headerlink" href="#retrieving-web-pages-with-urllib" title="Permalink to this headline">¶</a></h2>
<p>While we can manually send and receive data over HTTP using the socket
library, there is a much simpler way to perform this common task in
Python by using the <code class="docutils literal notranslate"><span class="pre">urllib</span></code> library.</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">urllib</span></code>, you can treat a web page much like a file.
You simply indicate which web page you would like to retrieve and
<code class="docutils literal notranslate"><span class="pre">urllib</span></code> handles all of the HTTP protocol and header details.</p>
<p>The equivalent code to read the <em>romeo.txt</em> file from the web
using <code class="docutils literal notranslate"><span class="pre">urllib</span></code> is as follows:</p>
<p>VerbatimInput{../code3/urllib1.py}</p>
<p>Once the web page has been opened with <code class="docutils literal notranslate"><span class="pre">urllib.urlopen</span></code>, we
can treat it like a file and read through it using a <code class="docutils literal notranslate"><span class="pre">for</span></code>
loop.</p>
<p>When the program runs, we only see the output of the contents of the
file. The headers are still sent, but the <code class="docutils literal notranslate"><span class="pre">urllib</span></code> code
consumes the headers and only returns the data to us.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">But</span> <span class="n">soft</span> <span class="n">what</span> <span class="n">light</span> <span class="n">through</span> <span class="n">yonder</span> <span class="n">window</span> <span class="n">breaks</span>
<span class="n">It</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">east</span> <span class="ow">and</span> <span class="n">Juliet</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">sun</span>
<span class="n">Arise</span> <span class="n">fair</span> <span class="n">sun</span> <span class="ow">and</span> <span class="n">kill</span> <span class="n">the</span> <span class="n">envious</span> <span class="n">moon</span>
<span class="n">Who</span> <span class="ow">is</span> <span class="n">already</span> <span class="n">sick</span> <span class="ow">and</span> <span class="n">pale</span> <span class="k">with</span> <span class="n">grief</span>
</pre></div>
</div>
<p>As an example, we can write a program to retrieve the data for
<code class="docutils literal notranslate"><span class="pre">romeo.txt</span></code> and compute the frequency of each word in the
file as follows:</p>
<p>VerbatimInput{../code3/urlwords.py}</p>
<p>Again, once we have opened the web page, we can read it like a local
file.</p>
</div>
<div class="section" id="reading-binary-files-using-urllib">
<h2>Reading binary files using <code class="docutils literal notranslate"><span class="pre">urllib</span></code><a class="headerlink" href="#reading-binary-files-using-urllib" title="Permalink to this headline">¶</a></h2>
<p>Sometimes you want to retrieve a non-text (or binary) file such as an
image or video file. The data in these files is generally not useful to
print out, but you can easily make a copy of a URL to a local file on
your hard disk using <code class="docutils literal notranslate"><span class="pre">urllib</span></code>.</p>
<p>index{binary file}</p>
<p>The pattern is to open the URL and use <code class="docutils literal notranslate"><span class="pre">read</span></code> to download the
entire contents of the document into a string variable
(<code class="docutils literal notranslate"><span class="pre">img</span></code>) then write that information to a local file as
follows:</p>
<p>VerbatimInput{../code3/curl1.py}</p>
<p>This program reads all of the data in at once across the network and
stores it in the variable <code class="docutils literal notranslate"><span class="pre">img</span></code> in the main memory of your
computer, then opens the file <code class="docutils literal notranslate"><span class="pre">cover.jpg</span></code> and writes the data
out to your disk. The <code class="docutils literal notranslate"><span class="pre">wb</span></code> argument for <code class="docutils literal notranslate"><span class="pre">open()</span></code> opens a binary file
for writing only. This program will work if the size of the file is less than
the size of the memory of your computer.</p>
<p>However if this is a large audio or video file, this program may crash
or at least run extremely slowly when your computer runs out of memory.
In order to avoid running out of memory, we retrieve the data in blocks
(or buffers) and then write each block to your disk before retrieving
the next block. This way the program can read any size file without
using up all of the memory you have in your computer.</p>
<p>VerbatimInput{../code3/curl2.py}</p>
<p>In this example, we read only 100,000 characters at a time and then
write those characters to the <code class="docutils literal notranslate"><span class="pre">cover.jpg</span></code> file before
retrieving the next 100,000 characters of data from the web.</p>
<p>This program runs as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">curl2</span><span class="o">.</span><span class="n">py</span>
<span class="mi">230210</span> <span class="n">characters</span> <span class="n">copied</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="parsing-html-and-scraping-the-web">
<h2>Parsing HTML and scraping the web<a class="headerlink" href="#parsing-html-and-scraping-the-web" title="Permalink to this headline">¶</a></h2>
<p>index{web!scraping}
index{parsing HTML}</p>
<p>One of the common uses of the <code class="docutils literal notranslate"><span class="pre">urllib</span></code> capability in Python
is to <em>scrape</em> the web. Web scraping is when we write a
program that pretends to be a web browser and retrieves pages, then
examines the data in those pages looking for patterns.</p>
<p>As an example, a search engine such as Google will look at the source of
one web page and extract the links to other pages and retrieve those
pages, extracting links, and so on. Using this technique, Google
<em>spiders</em> its way through nearly all of the pages on the
web.</p>
<p>Google also uses the frequency of links from pages it finds to a
particular page as one measure of how “important” a page is and how high
the page should appear in its search results.</p>
</div>
<div class="section" id="parsing-html-using-regular-expressions">
<h2>Parsing HTML using regular expressions<a class="headerlink" href="#parsing-html-using-regular-expressions" title="Permalink to this headline">¶</a></h2>
<p>One simple way to parse HTML is to use regular expressions to repeatedly
search for and extract substrings that match a particular pattern.</p>
<p>Here is a simple web page:</p>
<div class="highlight-{.html} notranslate"><div class="highlight"><pre><span></span>&lt;h1&gt;The First Page&lt;/h1&gt;
&lt;p&gt;
If you like, you can switch to the
&lt;a href=&quot;http://www.dr-chuck.com/page2.htm&quot;&gt;
Second Page&lt;/a&gt;.
&lt;/p&gt;
</pre></div>
</div>
<p>We can construct a well-formed regular expression to match and extract
the link values from the above text as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">href</span><span class="o">=</span><span class="s2">&quot;http[s]?://.+?&quot;</span>
</pre></div>
</div>
<p>Our regular expression looks for strings that start with
“href=”<a class="reference external" href="http://">http://</a>” or “href=”<a class="reference external" href="https://">https://</a>”, followed by one or more characters (<code class="docutils literal notranslate"><span class="pre">.+?</span></code>),
followed by another double quote. The question mark behind the <code class="docutils literal notranslate"><span class="pre">[s]?</span></code> indicates
to search for the string “http” followed by zero or one “s”.</p>
<p>The question mark added to the <code class="docutils literal notranslate"><span class="pre">.+?</span></code> indicates
that the match is to be done in a “non-greedy” fashion instead of a
“greedy” fashion. A non-greedy match tries to find the
<em>smallest</em> possible matching string and a greedy match
tries to find the <em>largest</em> possible matching string.</p>
<p>index{greedy}
index{non-greedy}</p>
<p>We add parentheses to our regular expression to indicate which part of
our matched string we would like to extract, and produce the following
program:</p>
<p>index{regex!parentheses}
index{parentheses!regular expression}</p>
<p>VerbatimInput{../code3/urlregex.py}</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ssl</span></code> library allows this program to access web sites that strictly
enforce HTTPS. The <code class="docutils literal notranslate"><span class="pre">read</span></code> method returns HTML source code as a bytes object
instead of returning an HTTPResponse object. The <code class="docutils literal notranslate"><span class="pre">findall</span></code> regular expression
method will give us a list of all of the strings that match our
regular expression, returning only the link text between the double quotes.</p>
<p>When we run the program and input a URL, we get the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Enter</span> <span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="mf">3.8</span><span class="o">/</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="mf">3.7</span><span class="o">/</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="mf">3.5</span><span class="o">/</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="mf">2.7</span><span class="o">/</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">doc</span><span class="o">/</span><span class="n">versions</span><span class="o">/</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">peps</span><span class="o">/</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">wiki</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">moin</span><span class="o">/</span><span class="n">BeginnersGuide</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">wiki</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">moin</span><span class="o">/</span><span class="n">PythonBooks</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">doc</span><span class="o">/</span><span class="n">av</span><span class="o">/</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">psf</span><span class="o">/</span><span class="n">donations</span><span class="o">/</span>
<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">sphinx</span><span class="o">.</span><span class="n">pocoo</span><span class="o">.</span><span class="n">org</span><span class="o">/</span>
</pre></div>
</div>
<p>Regular expressions work very nicely when your HTML is well formatted
and predictable. But since there are a lot of “broken” HTML pages out
there, a solution only using regular expressions might either miss some
valid links or end up with bad data.</p>
<p>This can be solved by using a robust HTML parsing library.</p>
</div>
<div class="section" id="parsing-html-using-beautifulsoup">
<h2>Parsing HTML using BeautifulSoup<a class="headerlink" href="#parsing-html-using-beautifulsoup" title="Permalink to this headline">¶</a></h2>
<p>index{BeautifulSoup}</p>
<p>Even though HTML looks like XML^[The XML format is described in the next chapter.]
and some pages are carefully
constructed to be XML, most HTML is generally broken in ways that cause
an XML parser to reject the entire page of HTML as improperly formed.</p>
<p>There are a number of Python libraries which can help you parse HTML and
extract data from the pages. Each of the libraries has its strengths and
weaknesses and you can pick one based on your needs.</p>
<p>As an example, we will simply parse some HTML input and extract links
using the <em>BeautifulSoup</em> library. BeautifulSoup tolerates highly flawed
HTML and still lets you easily extract the data you need. You can download and
install the BeautifulSoup code from:</p>
<p><a class="reference external" href="https://pypi.python.org/pypi/beautifulsoup4">https://pypi.python.org/pypi/beautifulsoup4</a></p>
<p>Information on installing BeautifulSoup with the Python Package Index tool <code class="docutils literal notranslate"><span class="pre">pip</span></code>
is available at:</p>
<p><a class="reference external" href="https://packaging.python.org/tutorials/installing-packages/">https://packaging.python.org/tutorials/installing-packages/</a></p>
<p>We will use <code class="docutils literal notranslate"><span class="pre">urllib</span></code> to read the page and then use
<code class="docutils literal notranslate"><span class="pre">BeautifulSoup</span></code> to extract the <code class="docutils literal notranslate"><span class="pre">href</span></code> attributes
from the anchor (<code class="docutils literal notranslate"><span class="pre">a</span></code>) tags.</p>
<p>index{BeautifulSoup}
index{HTML}
index{parsing!HTML}</p>
<p>VerbatimInput{../code3/urllinks.py}</p>
<p>The program prompts for a web address, then opens the web page, reads
the data and passes the data to the BeautifulSoup parser, and then
retrieves all of the anchor tags and prints out the <code class="docutils literal notranslate"><span class="pre">href</span></code>
attribute for each tag.</p>
<p>When the program runs, it produces the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Enter</span> <span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span>
<span class="n">genindex</span><span class="o">.</span><span class="n">html</span>
<span class="n">py</span><span class="o">-</span><span class="n">modindex</span><span class="o">.</span><span class="n">html</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span>
<span class="c1">#</span>
<span class="n">whatsnew</span><span class="o">/</span><span class="mf">3.6</span><span class="o">.</span><span class="n">html</span>
<span class="n">whatsnew</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
<span class="n">tutorial</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
<span class="n">library</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
<span class="n">reference</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
<span class="n">using</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
<span class="n">howto</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
<span class="n">installing</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
<span class="n">distributing</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
<span class="n">extending</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
<span class="n">c</span><span class="o">-</span><span class="n">api</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
<span class="n">faq</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
<span class="n">py</span><span class="o">-</span><span class="n">modindex</span><span class="o">.</span><span class="n">html</span>
<span class="n">genindex</span><span class="o">.</span><span class="n">html</span>
<span class="n">glossary</span><span class="o">.</span><span class="n">html</span>
<span class="n">search</span><span class="o">.</span><span class="n">html</span>
<span class="n">contents</span><span class="o">.</span><span class="n">html</span>
<span class="n">bugs</span><span class="o">.</span><span class="n">html</span>
<span class="n">about</span><span class="o">.</span><span class="n">html</span>
<span class="n">license</span><span class="o">.</span><span class="n">html</span>
<span class="n">copyright</span><span class="o">.</span><span class="n">html</span>
<span class="n">download</span><span class="o">.</span><span class="n">html</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="mf">3.8</span><span class="o">/</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="mf">3.7</span><span class="o">/</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="mf">3.5</span><span class="o">/</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="mf">2.7</span><span class="o">/</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">doc</span><span class="o">/</span><span class="n">versions</span><span class="o">/</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">peps</span><span class="o">/</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">wiki</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">moin</span><span class="o">/</span><span class="n">BeginnersGuide</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">wiki</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">moin</span><span class="o">/</span><span class="n">PythonBooks</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">doc</span><span class="o">/</span><span class="n">av</span><span class="o">/</span>
<span class="n">genindex</span><span class="o">.</span><span class="n">html</span>
<span class="n">py</span><span class="o">-</span><span class="n">modindex</span><span class="o">.</span><span class="n">html</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span>
<span class="c1">#</span>
<span class="n">copyright</span><span class="o">.</span><span class="n">html</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">psf</span><span class="o">/</span><span class="n">donations</span><span class="o">/</span>
<span class="n">bugs</span><span class="o">.</span><span class="n">html</span>
<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">sphinx</span><span class="o">.</span><span class="n">pocoo</span><span class="o">.</span><span class="n">org</span><span class="o">/</span>
</pre></div>
</div>
<p>This list is much longer because some HTML anchor tags are relative
paths (e.g., tutorial/index.html) or in-page references (e.g., ‘#’)
that do not include “<a class="reference external" href="http://">http://</a>” or “<a class="reference external" href="https://">https://</a>”, which was a
requirement in our regular expression.</p>
<p>You can use also BeautifulSoup to pull out various parts of each tag:</p>
<p>VerbatimInput{../code3/urllink2.py}</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">urllink2</span><span class="o">.</span><span class="n">py</span>
<span class="n">Enter</span> <span class="o">-</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">dr</span><span class="o">-</span><span class="n">chuck</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">page1</span><span class="o">.</span><span class="n">htm</span>
<span class="n">TAG</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;http://www.dr-chuck.com/page2.htm&quot;</span><span class="o">&gt;</span>
<span class="n">Second</span> <span class="n">Page</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
<span class="n">URL</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">dr</span><span class="o">-</span><span class="n">chuck</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">page2</span><span class="o">.</span><span class="n">htm</span>
<span class="n">Content</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Second Page&#39;</span><span class="p">]</span>
<span class="n">Attrs</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;href&#39;</span><span class="p">,</span> <span class="s1">&#39;http://www.dr-chuck.com/page2.htm&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">html.parser</span></code> is the HTML parser included in the standard Python 3 library.
Information on other HTML parsers is available at:</p>
<p><a class="reference external" href="http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser">http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser</a></p>
<p>These examples only begin to show the power of BeautifulSoup when it
comes to parsing HTML.</p>
</div>
<div class="section" id="bonus-section-for-unix-linux-users">
<h2>Bonus section for Unix / Linux users<a class="headerlink" href="#bonus-section-for-unix-linux-users" title="Permalink to this headline">¶</a></h2>
<p>If you have a Linux, Unix, or Macintosh computer, you probably have
commands built in to your operating system that retrieves both plain
text and binary files using the HTTP or File Transfer (FTP) protocols.
One of these commands is <code class="docutils literal notranslate"><span class="pre">curl</span></code>:</p>
<p>index{curl}</p>
<div class="highlight-{.bash} notranslate"><div class="highlight"><pre><span></span>$ curl -O http://www.py4e.com/cover.jpg
</pre></div>
</div>
<p>The command <code class="docutils literal notranslate"><span class="pre">curl</span></code> is short for “copy URL” and so the two
examples listed earlier to retrieve binary files with <code class="docutils literal notranslate"><span class="pre">urllib</span></code>
are cleverly named <code class="docutils literal notranslate"><span class="pre">curl1.py</span></code> and <code class="docutils literal notranslate"><span class="pre">curl2.py</span></code> on
<a class="reference external" href="http://www.py4e.com/code3">www.py4e.com/code3</a> as
they implement similar functionality to the <code class="docutils literal notranslate"><span class="pre">curl</span></code> command.
There is also a <code class="docutils literal notranslate"><span class="pre">curl3.py</span></code> sample program that does this task
a little more effectively, in case you actually want to use this pattern
in a program you are writing.</p>
<p>A second command that functions very similarly is <code class="docutils literal notranslate"><span class="pre">wget</span></code>:</p>
<p>index{wget}</p>
<div class="highlight-{.bash} notranslate"><div class="highlight"><pre><span></span>$ wget http://www.py4e.com/cover.jpg
</pre></div>
</div>
<p>Both of these commands make retrieving webpages and remote files a
simple task.</p>
</div>
<div class="section" id="glossary">
<h2>Glossary<a class="headerlink" href="#glossary" title="Permalink to this headline">¶</a></h2>
<p>BeautifulSoup
:   A Python library for parsing HTML documents and extracting data from</p>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\shrij\Runestone\py4e-int\_sources\12-network.rst</span>, line 608)</p>
<p>Unexpected indentation.</p>
</div>
<blockquote>
<div><p>HTML documents that compensates for most of the imperfections in the
HTML that browsers generally ignore. You can download the
BeautifulSoup code from <a class="reference external" href="http://www.crummy.com">www.crummy.com</a>.</p>
</div></blockquote>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\shrij\Runestone\py4e-int\_sources\12-network.rst</span>, line 611)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</div>
<p>index{BeautifulSoup}</p>
<p>port
:   A number that generally indicates which application you are</p>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\shrij\Runestone\py4e-int\_sources\12-network.rst</span>, line 615)</p>
<p>Unexpected indentation.</p>
</div>
<blockquote>
<div><p>contacting when you make a socket connection to a server. As an
example, web traffic usually uses port 80 while email traffic uses
port 25.</p>
</div></blockquote>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\shrij\Runestone\py4e-int\_sources\12-network.rst</span>, line 618)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</div>
<p>index{port}</p>
<p>scrape
:   When a program pretends to be a web browser and retrieves a web</p>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\shrij\Runestone\py4e-int\_sources\12-network.rst</span>, line 622)</p>
<p>Unexpected indentation.</p>
</div>
<blockquote>
<div><p>page, then looks at the web page content. Often programs are
following the links in one page to find the next page so they can
traverse a network of pages or a social network.</p>
</div></blockquote>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\shrij\Runestone\py4e-int\_sources\12-network.rst</span>, line 625)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</div>
<p>index{socket}</p>
<p>socket
:   A network connection between two applications where the applications</p>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\shrij\Runestone\py4e-int\_sources\12-network.rst</span>, line 629)</p>
<p>Unexpected indentation.</p>
</div>
<blockquote>
<div><p>can send and receive data in either direction.</p>
</div></blockquote>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\shrij\Runestone\py4e-int\_sources\12-network.rst</span>, line 630)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</div>
<p>index{socket}</p>
<p>spider
:   The act of a web search engine retrieving a page and then all the</p>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\shrij\Runestone\py4e-int\_sources\12-network.rst</span>, line 634)</p>
<p>Unexpected indentation.</p>
</div>
<blockquote>
<div><p>pages linked from a page and so on until they have nearly all of the
pages on the Internet which they use to build their search index.</p>
</div></blockquote>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\shrij\Runestone\py4e-int\_sources\12-network.rst</span>, line 636)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</div>
<p>index{spider}</p>
</div>
<div class="section" id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h2>
<p><strong>Exercise 1: Change the socket program ``socket1.py`` to prompt
the user for the URL so it can read any web page. You can use
``split(‘/’)`` to break the URL into its component parts so you
can extract the host name for the socket ``connect`` call. Add
error checking using ``try`` and ``except`` to handle
the condition where the user enters an improperly formatted or
non-existent URL.</strong></p>
<p><strong>Exercise 2: Change your socket program so that it counts the number of
characters it has received and stops displaying any text after it has
shown 3000 characters. The program should retrieve the entire document
and count the total number of characters and display the count of the
number of characters at the end of the document.</strong></p>
<p><strong>Exercise 3: Use ``urllib`` to replicate the previous exercise
of (1) retrieving the document from a URL, (2) displaying up to 3000
characters, and (3) counting the overall number of characters in the
document. Don’t worry about the headers for this exercise, simply show
the first 3000 characters of the document contents.</strong></p>
<p><strong>Exercise 4: Change the ``urllinks.py`` program to extract and
count paragraph (p) tags from the retrieved HTML document and display
the count of the paragraphs as the output of your program. Do not
display the paragraph text, only count them. Test your program on
several small web pages as well as some larger web pages.</strong></p>
<p><strong>Exercise 5: (Advanced) Change the socket program so that it only shows
data after the headers and a blank line have been received. Remember
that ``recv`` receives characters (newlines and all), not lines.</strong></p>
</div>
</div>


  <div id=scprogresscontainer>
    You have attempted <span id=scprogresstotal></span> of <span id=scprogressposs></span> activities on this page <div id="subchapterprogress"></div>
  </div>
  
      

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});

</script>

<script>
	function mouseOverPrev() {
		document.getElementById("relations-prev").style.opacity=1;
	}

	function mouseOutPrev() {
		document.getElementById("relations-prev").style.opacity=0.4;
	}
	function mouseOverNext() {
		document.getElementById("relations-next").style.opacity=1;
	}

	function mouseOutNext() {
		document.getElementById("relations-next").style.opacity=0.4;
	}
</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      
      <span id='numuserspan'></span><span class='loggedinuser'></span>
      
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2020 CS Learning 4 U group.
      Created using <a href="http://runestoneinteractive.org/">Runestone</a> .
    </p>
  </div>
</footer>




<script> getSwitch(); </script>


  </body>
</html>